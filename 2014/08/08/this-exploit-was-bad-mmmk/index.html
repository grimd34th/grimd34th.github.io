<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><meta name="viewport" content="width=932"><meta name="MobileOptimized" content="932"><meta name="generator" content="D34TH"><title>Heartbleed Announcment</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/awe.css"><link rel="stylesheet" type="text/css" href="/css/social-likes.css"><link rel="alternate" type="application/rss+xml" title="RSS" href=""><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="/js/imgLiquid-min.js"></script><script src="/js/social-likes.min.js"></script></head><body><div class="main-container"><div class="box profile"><div class="heading" style="background: #3e5354 url(/images/bg-heading.jpg) no-repeat"><div class="profile-img"><a href="//grimd34th.github.io/"><img src="/images/img-profile.jpg" width="154" height="150" alt="image description"></a></div><strong class="user"><a href="/">D34TH</a></strong> <span class="locate">United States</span></div><div class="setting"><a href="//grimd34th.github.io/" class="btn-profile">Profile</a> <a href="/" class="btn-photos">Photos</a> <a href="/" class="btn-follow">Follow me</a></div></div><div class="two-columns post-page"><div class="content"><div class="post box nocover"><em class="date"><span>08</span>Aug</em><h2 class="post-title"><a href="/2014/08/08/this-exploit-was-bad-mmmk/">Heartbleed Announcment</a></h2><div class="post-content"><p><strong>Important SSL Security Vulnerability</strong><br><br>On Monday, April 7th 2014, an OpenSSL vulnerability was disclosed which has been called one of the worst security holes in recent internet history. The bug, called the Heartbleed bug, was introduced in OpenSSL version 1.0.1. It has been in the wild since March of 2012 and is patched with OpenSSL version 1.0.1g released on April 7th 2014. The problem, tagged CVE-2014-0160, is <a href="https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-0160" target="_blank" rel="external">described in detail here</a>.</p><p>The bug allows any attacker to read the memory of a vulnerable host, which means that any keys that have been used on a host with a vulnerable version of OpenSSL should be considered compromised. Distributions have been updating their packages and pushing out updates, but users need to pull down the most recent packages and revoke any previous keys based on insecure versions.</p><p>We’ll show you how to update your systems with a secure version of OpenSSL, revoke any insecure SSL certificates, and test whether you are vulnerable or not.</p><p><strong>Update your System</strong><br><br>The mirrors are being updated to include the newest versions of the OpenSSL packages as they are made available by distribution packagers. The easiest way to update your packages is to update your entire system.</p><p>On Ubuntu and Debian, you can update by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get update</div><div class="line"><span class="built_in">sudo</span> apt-get dist-upgrade</div></pre></td></tr></table></figure><p>If you only want to upgrade the affected packages, and not update the entire system (only recommended if you have reason to believe that upgrades to other components will break your system), you can selectively upgrade the OpenSSL packages by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get install --only-upgrade openssl</div><div class="line"><span class="built_in">sudo</span> apt-get install --only-upgrade libssl1.<span class="number">0.0</span></div></pre></td></tr></table></figure><p>`</p><p>This will upgrade the vulnerable packages while leaving the rest of your system in an un-upgraded state.</p><p>On CentOS and Fedora, you can type this to update the entire system:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum update</div></pre></td></tr></table></figure><p>If you wish to only upgrade the affected package, you can instead issue this command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum update openssl</div></pre></td></tr></table></figure><p><br></p><p>Again, this is only recommended if you have a specific reason for not updating the complete system.</p><p>At the time of this writing (04/14/14), Fedora 19 does not have the latest versions in the stable repositories yet. You can wait for the update to be accepted, but you can also go ahead and manually build the package. This is probably worthwhile considering the severity of the bug.</p><p>For a 64 bit system:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum -y install koji</div><div class="line">koji download-build --arch=x86_64 openssl-<span class="number">1.0</span>.<span class="number">1</span>e-<span class="number">37</span>.fc19.<span class="number">1</span></div><div class="line">yum localinstall openssl-<span class="number">1.0</span>.<span class="number">1</span>e-<span class="number">37</span>.fc19.<span class="number">1</span>.x86_64.rpm</div></pre></td></tr></table></figure><p>You can do the same for a 32-bit system of Fedora 19 by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum -y install koji</div><div class="line">koji download-build --arch=i686 openssl-<span class="number">1.0</span>.<span class="number">1</span>e-<span class="number">37</span>.fc19.<span class="number">1</span></div><div class="line">yum localinstall openssl-<span class="number">1.0</span>.<span class="number">1</span>e-<span class="number">37</span>.fc19.<span class="number">1</span>.i686.rpm</div></pre></td></tr></table></figure><p>On Arch Linux, the packages can be updated by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> pacman -Syu</div></pre></td></tr></table></figure><p>Arch Linux systems can become very unstable if you selectively update packages, so we do not recommend that you only update the OpenSSL package.</p><p>This should pull in all of the recent updates, including OpenSSL if the mirror you are pointed to has pulled the newest packages. You should see openssl or some variant in your list of upgraded packages.</p><p>After you are finished, you should reboot your machine to make sure your server is not using the old version loaded in memory. You can do that by issuing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> shutdown -r now</div></pre></td></tr></table></figure><p>Checking your Version Numbers<br>You should check your version of OpenSSL after you have updated your system.</p><p>While OpenSSL version 1.0.1g is the official fix of this problem, the version that fixes this for different distributions and releases may vary. Some releases and distributions patched their older versions to fix the problem, rather than releasing an entirely new version into an older, stable ecosystem.</p><p>Because of this reason, it is best to check through your distribution’s packaging system, since the openssl version command might not reflect the information we need.</p><h3 id="Debian_and_Ubuntu_Releases_and_Fix_Versions">Debian and Ubuntu Releases and Fix Versions</h3><p>For Debian and Ubuntu systems, you get the current version of your OpenSSL package by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg <span class="operator">-l</span> | grep <span class="string">"openssl"</span></div></pre></td></tr></table></figure><p>You should receive output like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ii  openssl    <span class="number">1.0</span>.<span class="number">1</span>e-<span class="number">2</span>+deb7u6    amd64    Secure Socket Layer (SSL) binary and related cryptographic tools</div></pre></td></tr></table></figure><p>For Debian users, the release of Debian that you are running will determine the correct version for the fix. If your version of OpenSSL is at least as recent as the version listed here for your distribution, you should be protected:</p><p><strong>Debian 6 (Squeeze)</strong>: Unaffected (Shipped with older version prior to vulnerability)<br><br><strong>Debian 7 (Wheezy)</strong>: 1.0.1e-2+deb7u6<br><br><strong>Debian testing (Jessie)</strong>: 1.0.1g-1<br><br><strong>Debian unstable (Sid)</strong>: 1.0.1g-1</p><p>For Ubuntu users, the correct, patched version is also release-dependent. Use this list to see the minimum secure version for your release:</p><p><strong>Ubuntu 10.04</strong>: Unaffected (Shipped with older version prior to vulnerability)<br><br><strong>Ubuntu 12.04</strong>: 1.0.1-4ubuntu5.12<br><br><strong>Ubuntu 12.10</strong>: 1.0.1c-3ubuntu2.7<br><br><strong>Ubuntu 13.04</strong>: SUPPORT END OF LIFE REACHED, SHOULD UPGRADE<br><br><strong>Ubuntu 13.10</strong>: 1.0.1e-3ubuntu1.2</p><p>If you are on one of the supported distros, ensure that your OpenSSL version is up-to-date. If your distribution is not supported anymore (Ubuntu 13.04), it is highly recommended that you transition to a supported operating system due to this bug’s severity.</p><h3 id="CentOS_and_Fedora_Releases_and_Fix_Versions">CentOS and Fedora Releases and Fix Versions</h3><p>For CentOS and Fedora systems, you can query the version of the OpenSSL package installed on your system by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -q <span class="operator">-a</span> | grep <span class="string">"openssl"</span></div></pre></td></tr></table></figure><p>You should receive output that looks like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl-<span class="number">1.0</span>.<span class="number">1</span>e-<span class="number">16</span>.el6_5.<span class="number">7</span>.x86_64</div></pre></td></tr></table></figure><p>For CentOS, here are the releases and the minimum versions of OpenSSL that must be applied to protect future SSL interactions. We will take the architecture off the end in our list:</p><p><strong>CentOS 5</strong>: Unaffected (Shipped with older version prior to vulnerability)<br><br><strong>CentOS 6</strong>: openssl-1.0.1e-16.el6.5.7</p><p>For Fedora users, you can check that your package version is at least as recent as the ones listed below. Again, I have removed the architecture below because this applies to both 32-bit and 64-bit releases:</p><p><strong>Fedora 17</strong>: Unaffected (Shipped with older version prior to vulnerability)<br><br><strong>Fedora 19</strong>: openssl-1.0.1e-37.fc19.1</p><p>Note: Pay close attention to the Fedora version number. The trailing “.1” tells you if it is patched or not. If your package does not have the “.1” at the end, you are still vulnerable!<br><br></p><h3 id="Arch_Linux_Fix_Versions">Arch Linux Fix Versions</h3><p>If you are running Arch Linux, the validation is much easier since there are not multiple releases.</p><p>You can check the version of OpenSSL that you have installed with:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pacman -Q | grep <span class="string">"openssl"</span></div></pre></td></tr></table></figure><p>You should receive output that looks like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl <span class="number">1.0</span>.<span class="number">1</span>.g-<span class="number">1</span></div></pre></td></tr></table></figure><p>If your installed version is this release or higher, you are okay.</p><p>Revoking and Reissuing your SSL Certs/Keys<br>If you have purchased an SSL certificate from a provider and you have updated your OpenSSL packages on your server, you will need to revoke your old keys and you’ll have to reissue new keys. This is a process known as “rekeying”.</p><p>This process is very dependent upon the SSL service that issued your initial certificate, but you should search their administration interface for an option that is similar to “rekey” or “reissue keys”. Most SSL issuers will revoke your former key when you rekey, but you can usually also do this explicitly using their administrative interface.</p><p>Follow the directions that your SSL provider gives you. They may give you very specific instructions for how to regenerate a CSR, or they may not.</p><p>If they do not provide you with the specific openssl commands that they would like you to use, you can generate your new SSL CSR by typing something like this. Again, add sudo if you are not root:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -new -newkey rsa:<span class="number">2048</span> -nodes -keyout hostname.key -out hostname.csr</div></pre></td></tr></table></figure><p>You will need to copy your generated CSR into your provider’s web interface after generation in order to rekey your server. You will then need to download the new certificate from the web interface.</p><p>You will have to install the new keys to the same location that your old keys and certificates were kept. The path that you’ll need to use for your certificate and keys will vary by distribution and how you configured your web server. For instance, some are kept in /etc/ssl/certs while others may be kept in locations provided by your web server.</p><p>For example, if you are using the Apache web server, you should see a line in your main Apache configuration file, a virtualhost file, or a separately sourced configuration file that points to the location where it looks for your SSL information:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SSLEngine on</div><div class="line">SSLCertificateFile /path/to/your_domain.crt</div><div class="line">SSLCertificateKeyFile /path/to/your_key.key</div><div class="line">SSLCertificateChainFile /path/to/CA.crt</div></pre></td></tr></table></figure><p>These may look different, but they should point you in the correct direction to find your SSL certificate location.</p><p>If you are using Nginx, you’ll find similar directives that point to your server’s SSL certificate and key. They might look something like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">server {</div><div class="line">    . . .</div><div class="line">    ssl_certificate /path/to/your_domain.crt;</div><div class="line">    ssl_certificate_key /path/to/your_key.key;</div><div class="line">    . . .</div><div class="line">}</div></pre></td></tr></table></figure><p>Another option is to check your distribution’s documentation or check your server’s filesystem to find out where your certificates are stored.</p><p>When you are finished, you should restart your web server to use the new keys. The method of doing this will vary by distribution and server.</p><p>On Debian or Ubuntu, you can restart your web server by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> service apache2 restart    <span class="comment"># For Apache web server</span></div><div class="line"><span class="built_in">sudo</span> service nginx restart      <span class="comment"># For Nginx web server</span></div></pre></td></tr></table></figure><p>On CentOS or Fedora, you can restart by typing:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> service httpd restart      <span class="comment"># For Apache web server</span></div><div class="line"><span class="built_in">sudo</span> service nginx restart      <span class="comment"># For Nginx web server</span></div></pre></td></tr></table></figure><p>For Arch Linux you should use something like:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> systemctl restart httpd.service</div><div class="line"><span class="built_in">sudo</span> systemctl restart nginx.service</div></pre></td></tr></table></figure><p>This should allow your web server to pick up your new certificate changes.</p><p>Additional Considerations from a Client’s Perspective<br>Because of the widespread nature of this bug, there are other considerations that you should take into account as well. As a consumer of web services and sites, you should also react quickly to try to minimize the potential damage to your accounts and information.</p><p>You should consider any communication that you secured by SSL previously to have been compromised by this bug. This means any kind of interaction with secure websites were open to snooping.</p><p>A good first step is to change your password on every site that you use, after you have verified that they have updated their OpenSSL versions to patch this vulnerability. If you change your password prior to the remote site patching their SSL version, your new password is just as vulnerable as your old one.</p><p>One consideration that is of high importance is to secure any VPN instances that you have set up. There are a few different ways that VPN connections are implemented, but SSL is one of the most popular. For instance, OpenVPN uses SSL. Any certificates required to connect to your server should be regenerated to ensure that they are secured.</p><p>Another good measure is to remove all session keys and cookies. This means regenerate API keys, clear cookies that are stored in your browser, etc. This may be a massive inconvenience, but the cost of not going through these pains now is that your accounts are basically wide open and communication with remote servers that have not updated their OpenSSL should be considered no more secure than plain-text.</p><p><strong>Conclusion</strong></p><p>This is an incredibly large bug that users and administrators cannot afford to ignore or put off. You should update any servers that you have control over immediately and inform your users of the vulnerabilities so that they can do damage control from their end.</p><p>By patching your system and updating your SSL certificates, you should be protected against this vulnerability, as a host, for future communications.</p><p><em>By Justin Ellingwood</em></p></div><div class="bottom-panel"><ul class="social-likes" data-url="/2014/08/08/this-exploit-was-bad-mmmk/"><li class="facebook" title="like"></li><li class="twitter" title="twitte"></li><li class="plusone" title="google"></li></ul></div></div></div><div class="widgetarea"><div class="tagcloud" id="fbox-tagcloud" style="margin:10px; display:none; overflow: hidden"></div><ul class="widget blogroll"><h3 class="title">Recent Post</h3><li><div class="text-holder"><h3 class="link-title"><a href="/2014/08/08/sshd-exploit/">sshd exploit</a></h3><p>So a fake sshd claiming to exploit a network check</p></div></li><li><div class="text-holder"><h3 class="link-title"><a href="/2014/08/08/securing-linux-servers/">Securing Linux Servers</a></h3><p>Introduction Taking control of your own Linux serv</p></div></li><li><div class="text-holder"><h3 class="link-title"><a href="/2014/08/08/precise-mysql-setup/">How To Setup MySQL on Ubuntu 12.04</a></h3><p>What the italic Means The lines that the user nee</p></div></li><li><div class="text-holder"><h3 class="link-title"><a href="/2014/08/08/muh-ssh-keys-doe/">Generating secure (ECDSA) SSH keys for your new install</a></h3><p>Generating a SSH key An SSH key pair can be genera</p></div></li><li><div class="text-holder"><h3 class="link-title"><a href="/2014/08/08/this-exploit-was-bad-mmmk/">Heartbleed Announcment</a></h3><p>Important SSL Security VulnerabilityOn Monday, Apr</p></div></li></ul></div></div></div><div class="footer"><div class="container"><a href="//github.com/kywk/hexo-theme-awe">AWE for hexo</a> inspired by <a href="http://goo.gl/H8OMRE">Awesome UI Kit</a>, ported by <a href="//kywk.github.io/">MooCow (Aka. kywk)</a>. &copy; 2014 Trevor Driscoll All Rights Reserved</div></div><script>$(document).ready(function(){$(".imgLiquid").imgLiquid({fill:!0,fadeInTime:500})});</script><link rel="stylesheet" href="/package/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"><script type="text/javascript" src="/package/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript">!function(e){e(".fancybox").fancybox(),e(".various").fancybox({maxWidth:800,maxHeight:600,fitToView:!1,width:"70%",height:"70%",autoSize:!0,closeClick:!1,openEffect:"none",closeEffect:"none"})}(jQuery);</script></body></html>